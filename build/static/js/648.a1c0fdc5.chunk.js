"use strict";(self.webpackChunkGeoLocation_Sharing_App=self.webpackChunkGeoLocation_Sharing_App||[]).push([[648],{5971:function(e,n,t){t.r(n),t.d(n,{default:function(){return g}});var o=t(4165),r=t(5861),c=t(9439),s=t(2791),a=t(7689),i=t(3373),l=t(3999),d=t(184),u=function(e){var n=(0,s.useRef)(),t=e.center,o=e.zoom;return(0,s.useEffect)((function(){var e=new window.google.maps.Map(n.current,{center:t,zoom:o});new window.google.maps.Marker({position:t,map:e})}),[t,o]),(0,d.jsx)("div",{ref:n,className:"map ".concat(e.className),style:e.style})},h=t(2921),m=t(5434),x=t(9895),f=t(3108),p=t(9508),j=function(e){var n=(0,s.useContext)(f.V),t=(0,p.x)(),a=t.isLoading,j=t.hasError,v=t.sendRequest,g=t.clearError,Z=(0,s.useState)(!1),_=(0,c.Z)(Z,2),C=_[0],w=_[1],k=(0,s.useState)(!1),y=(0,c.Z)(k,2),N=y[0],E=y[1],L=function(){return w(!1)},D=function(){return E(!1)},S=function(){var t=(0,r.Z)((0,o.Z)().mark((function t(){return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return E(!1),t.prev=1,t.next=4,v("".concat("http://localhost:5000/api","/locations/").concat(e.id),"DELETE",null,{Authorization:"Bearer "+n.token});case 4:e.onDelete(e.id),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(){return t.apply(this,arguments)}}();return(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(m.Z,{error:j,onClear:g}),(0,d.jsx)(h.Z,{show:C,onCancel:L,header:e.address,contentClass:"location-item__modal-content",footerClass:"location-item__modal-actions",footer:(0,d.jsx)(l.Z,{onClick:L,children:"Close"}),children:(0,d.jsx)("div",{className:"map-container",children:(0,d.jsx)(u,{center:e.coordinates,zoom:16})})}),(0,d.jsx)(h.Z,{show:N,onCancel:D,header:"Are you sure?",contentClass:"location-item__modal-content",footerClass:"location-item__modal-actions",footer:(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(l.Z,{inverse:!0,onClick:D,children:"Cancel"}),(0,d.jsx)(l.Z,{danger:!0,onClick:S,children:"Delete"})]}),children:(0,d.jsx)("p",{children:"You are about to permanently delete this location. Are you sure you wish to proceed?"})}),(0,d.jsx)("li",{className:"location-item",children:(0,d.jsxs)(i.Z,{className:"location-item__content",children:[a&&(0,d.jsx)(x.Z,{asOverlay:!0}),(0,d.jsx)("div",{className:"location-item__image",children:(0,d.jsx)("img",{src:"".concat("http://localhost:5000","/uploads/images/").concat(e.image),alt:e.title})}),(0,d.jsxs)("div",{className:"location-item__info",children:[(0,d.jsx)("h2",{children:e.title}),(0,d.jsx)("h3",{children:e.address}),(0,d.jsx)("p",{children:e.description})]}),(0,d.jsxs)("div",{className:"location-item__actions",children:[(0,d.jsx)(l.Z,{inverse:!0,onClick:function(){return w(!0)},children:"View on Map"}),n.isLoggedIn&&n.userId===e.createdBy&&(0,d.jsx)(l.Z,{to:"/locations/".concat(e.id),children:"Edit"}),n.isLoggedIn&&n.userId===e.createdBy&&(0,d.jsx)(l.Z,{danger:!0,onClick:function(){return E(!0)},children:"Delete"})]})]})})]})},v=function(e){return 0===e.items.length?(0,d.jsx)("div",{className:"location-list center",children:(0,d.jsxs)(i.Z,{children:[(0,d.jsx)("h2",{children:"No locations found"}),(0,d.jsx)(l.Z,{to:"/locations/new",children:"Share a Location"})]})}):(0,d.jsx)("ul",{className:"location-list",children:e.items.map((function(n){return(0,d.jsx)(j,{id:n.id,image:n.imageUrl,title:n.title,description:n.description,address:n.address,createdBy:n.createdBy,coordinates:n.coordinates,onDelete:e.onDeleteLocation},n.id)}))})},g=function(e){var n=(0,s.useState)(),t=(0,c.Z)(n,2),i=t[0],l=t[1],u=(0,p.x)(),h=u.isLoading,f=u.hasError,j=u.sendRequest,g=u.clearError,Z=(0,a.UO)().uid;(0,s.useEffect)((function(){var e=function(){var e=(0,r.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j("".concat("http://localhost:5000/api","/locations/user/").concat(Z));case 3:n=e.sent,l(n.locations),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e()}),[j,Z]);return(0,d.jsxs)(s.Fragment,{children:[(0,d.jsx)(m.Z,{error:f,onClear:g}),h&&(0,d.jsx)("div",{className:"center",children:(0,d.jsx)(x.Z,{})}),!h&&i&&(0,d.jsx)(v,{items:i,onDeleteLocation:function(e){l((function(n){return n.filter((function(n){return n.id!==e}))}))}})]})}},3373:function(e,n,t){t.d(n,{Z:function(){return r}});t(2791);var o=t(184),r=function(e){return(0,o.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})}}}]);
//# sourceMappingURL=648.a1c0fdc5.chunk.js.map